System`HoldComplete[Global`RedefinePublicFunction[Global`DiagonalSet0To1[System`Condition[System`Pattern[Global`m, System`Blank[]], Global`NumericMatrixQ[Global`m]]], "returns a copy of m with all 0 on the main diagonal set to 1.", System`Module[System`List[System`Set[Global`n, Global`m]], System`CompoundExpression[System`Table[System`CompoundExpression[System`Set[System`Part[Global`n, Global`i, Global`i], System`If[System`Equal[System`Part[Global`n, Global`i, Global`i], 0], 1.`, System`Part[Global`n, Global`i, Global`i]]], System`Null], System`List[Global`i, System`Min[System`Dimensions[Global`m]]]], Global`n]], System`Blank[], ""]]