System`HoldComplete[Global`RedefinePublicFunction[Global`SceneXEnergySelect[System`Pattern[Global`dimension, System`Alternatives[2, 3]], System`Pattern[Global`lightIntensityParameterCount, System`Blank[System`Integer]], System`Pattern[Global`colorDim, System`Blank[System`Integer]]], "constructs the SOP selection function, which maps variables as used in the SceneXEnergyf[] expression to variable names as given in SceneXDEnergyData", System`Module[System`List[Global`select], System`CompoundExpression[System`SetDelayed[Global`select[System`Pattern[Global`position, System`Table[System`Blank[System`Integer], Global`dimension]]], System`Join[System`List[], System`Map[Global`IdentityRule, System`Array[Global`l, Global`lightIntensityParameterCount]], System`Map[Global`IdentityRule, Global`SceneXEnergyWeightNames[]], System`Flatten[System`Map[System`Function[System`List[Global`var], System`Array[System`Function[System`Rule[Global`var[System`List[System`SlotSequence[1]]], Global`var[System`Plus[Global`position, System`List[System`SlotSequence[1]]]]]], System`Table[3, Global`dimension], System`Times[-1, System`Table[1, Global`dimension]]]], System`Map[System`Symbol, System`List["doriginal", "d", "a"]]], Global`dimension], System`Flatten[System`Array[System`Function[System`Table[System`Rule[System`Symbol["c"][System`List[System`SlotSequence[1]], Global`i], System`Symbol["c"][System`Plus[Global`position, System`List[System`SlotSequence[1]]], Global`i]], System`List[Global`i, Global`colorDim]]], System`Table[3, Global`dimension], System`Times[-1, System`Table[1, Global`dimension]]], Global`dimension]]], Global`select]], System`Blank[], ""]]