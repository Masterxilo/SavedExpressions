System`Cell[System`BoxData[System`RowBox[System`List["Persist", "[", System`RowBox[System`List["GridData", ",", "\[IndentingNewLine]", "\[IndentingNewLine]", System`RowBox[System`List["(*", "\n", System`RowBox[System`List[System`RowBox[System`List[System`RowBox[System`List["Store", " ", "immutable", " ", "data", " ", "associated", " ", "with", " ", "positions", " ", "on", " ", "a", " ", "uniform", " ", System`RowBox[System`List["grid", ".", "\n", "\n", "Abstracts"]], " ", "away", " ", "the", " ", "details", " ", "of", " ", "storing", " ", "a", " ", "fixed", " ", "data"]], "-", System`RowBox[System`List["structure", " ", "for", " ", "each", " ", "point", " ", "in", "\n", "an", " ", "n"]], "-", System`RowBox[System`List["dimensional", " ", System`RowBox[System`List["(", "sparse", ")"]], " ", System`RowBox[System`List["grid", ".", "\n", "\n", "Allows"]], " ", "converting", " ", "between", " ", "various", " ", "representations", " ", "for", " ", "such", " ", "data"]]]], ",", "\n", System`RowBox[System`List["as", " ", "well", " ", "as", " ", "extracting", " ", "portions", " ", "of", " ", "data", " ", "as", " ", "an", " ", "array", " ", "of", " ", "structures"]], ",", "\n", System`RowBox[System`List["a", " ", "structure", " ", "of", " ", "arrays", " ", "and", " ", "mixtures", " ", "of", " ", System`RowBox[System`List["these", ".", "\n", "\n", "Can"]], " ", "efficiently", " ", "access", " ", "any", " ", "elements", " ", "and", " ", "rectangular", " ", "subset", " ", "of", " ", "elements", "\n", "in", " ", "the", " ", "grid"]], ",", " ", System`RowBox[System`List[System`RowBox[System`List["as", " ", "well", " ", "as", " ", "do", " ", "re"]], "-", System`RowBox[System`List[System`RowBox[System`List["indexing", ".", "\n", "\n", "This"]], " ", "can", " ", "be", " ", "considered", " ", "a", " ", "special", " ", "kind", " ", "of", " ", "FiniteMapping"]]]], ",", " ", "Array", ",", " ", "Image", ",", " ", "Image3D", ",", " ", "SparseArray", ",", "\n", System`RowBox[System`List["hash", "-", System`RowBox[System`List["indexed", " ", "collection", " ", System`RowBox[System`List["(", System`RowBox[System`List["vector", ",", " ", "list"]], ")"]]]]]], ",", " ", System`RowBox[System`List["expression", " ", "used", " ", "to", " ", "store", " ", "data", " ", System`RowBox[System`List["(", System`RowBox[System`List["by", " ", "positions"]], ")"]], " ", System`RowBox[System`List["etc", "."]]]]]], "\n", "*)"]], "\n", "\n", System`RowBox[System`List["(*", " ", "TODO", " ", "*)"]], "\n", System`RowBox[System`List["(*", "\n", System`RowBox[System`List[System`RowBox[System`List[System`RowBox[System`List["-", " ", "support"]], " ", System`RowBox[System`List["empty", "?", "\n", System`RowBox[System`List["-", " ", "support"]]]], " ", "copying", " ", "some", " ", "attributes", " ", "to", " ", "others", " ", System`RowBox[System`List["(", System`RowBox[System`List["generalize", " ", "DataSubset"]], ")"]]]], "\n", "-", " ", System`RowBox[System`List["support", " ", System`RowBox[System`List["copying", "/", "moving"]], " ", "regions", " ", "around"]], "\n", "-", " ", System`RowBox[System`List["support", " ", "densifying"]], "\n", "-", " ", System`RowBox[System`List["detect", " ", "and", " ", "report", " ", "repeated", " ", "variable", " ", "names", " ", "and", " ", "other", " ", "errors"]], "\n", "-", " ", System`RowBox[System`List["detect", " ", "when", " ", "the", " ", "grid", " ", "is", " ", "dense"]], "\n", "-", " ", System`RowBox[System`List["allow", " ", "efficient", " ", "dense", " ", "indexing", " ", "of", " ", "small", " ", "neighborhoods", " ", System`RowBox[System`List["(", System`RowBox[System`List[System`RowBox[System`List[System`RowBox[System`List["e", ".", "g", ".", " ", "for"]], " ", "objective", " ", "functions", " ", "in", " ", "optimizations"]], ",", " ", "convolutions", ",", " ", System`RowBox[System`List["filtering", " ", System`RowBox[System`List["etc", "."]]]]]], ")"]]]], "\n", "-", " ", System`RowBox[System`List["treat", " ", "the", " ", "case", " ", "of", " ", "NumericVector", " ", "valued", " ", "data", " ", System`RowBox[System`List["(", System`RowBox[System`List[System`RowBox[System`List["i", ".", "e", ".", " ", "a"]], " ", "list", " ", "of", " ", "floats"]], ")"]], " ", System`RowBox[System`List["specially", "\n", " ", "^", " ", "consider"]], " ", "implementing", " ", "it", " ", "as", " ", "if", " ", "this", " ", "where", " ", "the", " ", "case", " ", "even", " ", "for", " ", "differently", " ", "nested", " ", "lists", " ", System`RowBox[System`List["(", "\n", " ", System`RowBox[System`List[System`RowBox[System`List[System`RowBox[System`List["e", ".", "g", ".", " ", "data"]], " ", "of", " ", "the", " ", "form", " ", System`RowBox[System`List["{", " ", System`RowBox[System`List[System`RowBox[System`List["{", System`RowBox[System`List["nx", ",", " ", "nx"]], "}"]], ",", " ", "d", ",", " ", System`RowBox[System`List["{", System`RowBox[System`List["r", ",", "g", ",", "b"]], "}"]]]], "}"]], " ", "or", " ", "even", " ", "with", " ", "a", " ", "matrix"]], "\n", "-", " ", System`RowBox[System`List["investigate", " ", "how", " ", "Association", " ", "and", " ", "or", " ", "Dataset", " ", "perform", " ", "with", " ", "these", " ", "tasks"]]]], "\n"]]]]]], "*)"]], "\n", "\n", System`RowBox[System`List["(*", " ", System`RowBox[System`List["--", " ", System`RowBox[System`List["Purpose", " ", "--"]]]], " ", "*)"]], "\n", System`RowBox[System`List["(*", "\n", System`RowBox[System`List["Store", " ", "immutable", " ", "data", " ", "associated", " ", "with", " ", "positions", " ", "on", " ", "a", " ", "uniform", " ", System`RowBox[System`List["grid", "."]]]], "\n", "*)"]], "\n", "\n", System`RowBox[System`List["(*", " ", System`RowBox[System`List["Implementation", " ", "notes"]], " ", "*)"]], "\n", System`RowBox[System`List["(*", " ", System`RowBox[System`List[System`RowBox[System`List["Valid", " ", "forms", " ", System`RowBox[System`List["are", ":", "\n", System`RowBox[System`List[System`RowBox[System`List["GridData", "[", System`RowBox[System`List["dataNames_List", ",", " ", "f_FiniteMapping"]], "]"]], "\n", " ", "f", " ", "maps", " ", "coordinates", " ", "to", " ", "a", " ", "list", " ", "of", " ", "values", " ", "of", " ", "length", "\n", " ", "dataNames"]]]]]], ",", " ", System`RowBox[System`List["which", " ", "are", " ", "associated", " ", "with", " ", "dataNames", " ", "in", " ", "their", " ", "given", " ", "order", "\n", "\n", " ", "Conceptually"]], ",", " ", System`RowBox[System`List[System`RowBox[System`List["we", " ", "have", " ", "a", " ", "FinteMapping", " ", "that", " ", "creates", " ", "a", " ", "finite", " ", "mapping", " ", "at", " ", "each", " ", System`RowBox[System`List["point", ".", "\n", " ", "We"]], " ", "just", " ", System`RowBox[System`List["don", "'"]], "t", " ", "store", " ", "the", " ", "keys", " ", System`RowBox[System`List["(", System`RowBox[System`List["that", " ", "are", " ", System`RowBox[System`List["shared", "!"]]]], ")"]], " ", "on", " ", "each", " ", "inner", " ", "finite", " ", System`RowBox[System`List["mapping", ".", "\n", "\n", " ", "TODO"]], " ", "use", " ", "custom", " ", "structure", " ", "to", " ", "optimize", " ", "expected", " ", "queries", "\n", " ", "TODO", " ", "store", " ", "more", " ", "data", " ", "to", " ", "correct", " ", "user", " ", "errors"]], "\n", " ", "-", " ", System`RowBox[System`List["maybe", " ", "rely", " ", "on", " ", "internal", " ", "structure", " ", "of", " ", "FiniteMapping", " ", System`RowBox[System`List["(", System`RowBox[System`List["to", " ", "be", " ", "Array", " ", "or", " ", "SparseArray"]], ")"]]]], "\n", " ", "-", " ", System`RowBox[System`List["allow", " ", "querying", " ", "whether", " ", "it", " ", "is", " ", System`RowBox[System`List["dense", "?", "\n", " ", System`RowBox[System`List["-", " ", "specify"]]]], " ", "a", " ", "pattern", " ", "on", " ", "the", " ", "data", " ", System`RowBox[System`List["(", System`RowBox[System`List[System`RowBox[System`List["all", " ", "reals"]], ",", " ", System`RowBox[System`List["more", " ", "grids", " ", System`RowBox[System`List["etc", "."]]]]]], ")"]]]], "\n", " ", "-", " ", System`RowBox[System`List["convert", " ", "to", " ", "and", " ", "from", " ", "Array"]]]], ",", " ", "Image", ",", " ", System`RowBox[System`List[System`RowBox[System`List["Image3D", "\n", " ", "-", " ", System`RowBox[System`List["allow", " ", "filtering", " ", "to", " ", "sparsify", " ", System`RowBox[System`List["(", System`RowBox[System`List["ala", " ", System`RowBox[System`List["SelectQ", "/", "DeleteCases"]]]], ")"]], " ", "and", " ", "to", "\n", "   ", "extend"]]]], " ", "->", " ", System`RowBox[System`List["NearestFilter", "\n", "\n", " ", "-", " ", System`RowBox[System`List["generate", " ", "from", " ", "image", " ", "which", " ", "is", " ", "discretized", " ", "distance", " ", "function", " ", "to", " ", "mesh", " ", System`RowBox[System`List[System`RowBox[System`List["(", System`RowBox[System`List["->", " ", System`RowBox[System`List["volumetric", "\n", "   ", "representation", " ", "of", " ", "a", " ", "mesh"]]]], ")"]], ".", "\n", "\n", "TODO"]], " ", "allow", " ", "more", " ", "operations", " ", "on", " ", "data", " ", System`RowBox[System`List["(", "map", ")"]], "\n", "TODO", " ", "allow", " ", "accessing", " ", "points", " ", "and", " ", "neightborhoods", "\n", "TODO", " ", "allow", " ", "applying", " ", "filters", " ", System`RowBox[System`List["(", System`RowBox[System`List[System`RowBox[System`List[System`RowBox[System`List["convolutions", " ", "and", " ", "non"]], "-", System`RowBox[System`List["uniform", "/", "linear"]]]], ",", " ", System`RowBox[System`List["e", ".", "g", ".", " ", "bilateral"]], ",", " ", System`RowBox[System`List["hole", " ", "filling", " ", System`RowBox[System`List["(", "dilate", ")"]]]]]], ")"]], " ", "operating", " ", "on", " ", "neightborhoods", "\n", "TODO", " ", "develop", " ", "syntax", " ", "package", " ", "that", " ", "abstracts", " ", "away", " ", "the", " ", "internal", " ", "structure", " ", System`RowBox[System`List["(", System`RowBox[System`List["Format", " ", "rules"]], ")"]]]]]]]], ",", " ", System`RowBox[System`List["allows", " ", "more", " ", "concise", " ", "code"]], ",", "\n", "\n", System`RowBox[System`List[System`RowBox[System`List["TODO", " ", "distribute", "\n", "Todo", " ", "convert", " ", "to", " ", "and", " ", "from", " ", "image", "\n", "\n", System`RowBox[System`List["(*", " ", System`RowBox[System`List[System`RowBox[System`List["TODO", " ", "support", " ", "non"]], "-", System`RowBox[System`List["numeric", " ", "data"]]]], " ", "*)"]], "\n", "TODO", " ", "note", " ", "that", " ", "SparseArray", " ", "can", " ", "store", " ", "non"]], "-", System`RowBox[System`List["numeric", " ", "data", "\n", "TODO", " ", "deal", " ", "with", " ", "non", " ", "list", " ", System`RowBox[System`List["(", System`RowBox[System`List["single", " ", "item"]], ")"]], " ", "data"]]]]]], "\n", "*)"]], "\[IndentingNewLine]", "\[IndentingNewLine]", System`RowBox[System`List[System`RowBox[System`List["UnprotectClearAll", "@", "GridData"]], ";", "\[IndentingNewLine]", System`RowBox[System`List["GridData", "~", "SetAttributes", "~", "HoldAllComplete"]], ";", "\[IndentingNewLine]", System`RowBox[System`List["Protect", "@", "GridData"]], ";"]]]], "\[IndentingNewLine]", "]"]]], "Input", System`Rule[System`CellChangeTimes, System`List[System`List[3.681567210612527`*^9, 3.6815672124338136`*^9], System`List[3.681567251350382`*^9, 3.681567314832633`*^9], 3.6816488692196274`*^9, System`List[3.6817328173071957`*^9, 3.681732826256497`*^9]]], System`Rule[System`CellTags, "depersistedCell4b37c5d4-7d71-4113-865c-d53e74810f68"]]