System`HoldComplete[System`CompoundExpression[System`Unprotect[Global`Cform], System`Set[System`MessageName[Global`Cform, "nestedhead"], "Nested heads detected in ``, unsupported in C."], System`Set[System`MessageName[Global`Cform, "numerichead"], "Numeric heads detected in ``, unsupported in C."], System`Set[System`MessageName[Global`Cform, "unknownSym"], "Symbols unknown to C: `` detected in ``"], System`Protect[Global`Cform], Global`RedefinePublicFunction[Global`CformSymbolic[System`Pattern[Global`expr, System`Blank[]], System`Optional[System`Pattern[Global`variableReplacements, System`Blank[System`List]], System`List[]], System`Optional[System`Pattern[Global`extraRules, System`Blank[System`List]], System`List[]]], "C code evaluating this expression, as long as all variables are real valued and functions are simple", System`Module[System`List[System`Set[Global`result, System`ReplaceAll[Global`expr, Global`variableReplacements]], System`Set[Global`allRules, System`Join[Global`extraRules, System`List[System`RuleDelayed[System`Sin[System`Pattern[Global`x, System`Blank[]]], Global`sin[Global`x]], System`RuleDelayed[System`Cos[System`Pattern[Global`x, System`Blank[]]], Global`cos[Global`x]], System`RuleDelayed[System`Sqrt[System`PatternTest[System`Pattern[Global`x, System`Blank[]], System`Composition[System`Not, System`TrueQ, System`Negative]]], Global`sqrt[Global`x]], System`RuleDelayed[System`Abs[System`Pattern[Global`x, System`Blank[]]], Global`abs[Global`x]], System`RuleDelayed[System`Power[System`Pattern[Global`x, System`Blank[]], System`Times[-1, System`Power[2, -1]]], Global`rsqrt[Global`x]], System`RuleDelayed[System`Power[System`Pattern[Global`x, System`Blank[]], 2], Global`sqr[Global`x]], System`RuleDelayed[System`Power[System`Pattern[Global`x, System`Blank[]], -1], Global`inv[Global`x]], System`RuleDelayed[System`Power[System`Pattern[Global`x, System`Blank[]], System`Pattern[Global`y, System`Blank[]]], Global`pow[Global`x, Global`y]], System`RuleDelayed[System`Derivative[1][System`Abs][System`Pattern[Global`x, System`Blank[]]], Global`ifthenelse[System`Less[Global`x, 0], -1, 1]], System`RuleDelayed[System`Equal[System`Pattern[Global`x, System`Blank[]], System`Pattern[Global`y, System`Blank[]]], Global`equal[Global`x, Global`y]], System`RuleDelayed[System`Greater[System`Pattern[Global`x, System`Blank[]], System`Pattern[Global`y, System`Blank[]]], Global`greater[Global`x, Global`y]], System`RuleDelayed[System`Less[System`Pattern[Global`x, System`Blank[]], System`Pattern[Global`y, System`Blank[]]], Global`less[Global`x, Global`y]], System`RuleDelayed[System`GreaterEqual[System`Pattern[Global`x, System`Blank[]], System`Pattern[Global`y, System`Blank[]]], Global`greaterEqual[Global`x, Global`y]], System`RuleDelayed[System`LessEqual[System`Pattern[Global`x, System`Blank[]], System`Pattern[Global`y, System`Blank[]]], Global`lessEqual[Global`x, Global`y]], System`RuleDelayed[System`And, Global`and], System`RuleDelayed[Global`and[System`Pattern[Global`x, System`Blank[]], System`Pattern[Global`y, System`Blank[]], System`Pattern[Global`rest, System`BlankSequence[]]], Global`and[Global`and[Global`x, Global`y], Global`rest]], System`RuleDelayed[System`Or, Global`or], System`RuleDelayed[Global`or[System`Pattern[Global`x, System`Blank[]], System`Pattern[Global`y, System`Blank[]], System`Pattern[Global`rest, System`BlankSequence[]]], Global`or[Global`or[Global`x, Global`y], Global`rest]], System`RuleDelayed[System`Piecewise, Global`piecewise], System`RuleDelayed[Global`piecewise[System`List[], System`Pattern[Global`finally, System`Blank[]]], Global`finally], System`RuleDelayed[Global`piecewise[System`List[System`List[System`Pattern[Global`e, System`Blank[]], System`Pattern[Global`cond, System`Blank[]]], System`Pattern[Global`rest, System`BlankNullSequence[]]], System`Pattern[Global`finally, System`Blank[]]], Global`ifthenelse[Global`cond, Global`e, Global`piecewise[System`List[Global`rest], Global`finally]]], System`RuleDelayed[System`Times[-1, System`Pattern[Global`y, System`Blank[]]], Global`neg[Global`y]], System`RuleDelayed[System`Times[System`Pattern[Global`x, System`Blank[]], System`Pattern[Global`y, System`Blank[]]], Global`times[Global`x, Global`y]], System`RuleDelayed[System`Plus[System`Pattern[Global`x, System`Blank[]], System`Pattern[Global`y, System`Blank[]]], Global`plus[Global`x, Global`y]], System`RuleDelayed[System`Max[System`Pattern[Global`x, System`Blank[]], System`Pattern[Global`y, System`Blank[]]], Global`max[Global`x, Global`y]], System`RuleDelayed[System`Min[System`Pattern[Global`x, System`Blank[]], System`Pattern[Global`y, System`Blank[]]], Global`min[Global`x, Global`y]], System`RuleDelayed[System`Pattern[Global`x, System`Blank[System`Integer]], Global`x], System`RuleDelayed[System`PatternTest[System`Pattern[Global`x, System`Blank[]], System`NumericQ], System`N[Global`x]]]]]], System`Module[System`List[System`Set[Global`knownSymbols, System`DeleteDuplicates[System`Map[Global`SymbolicHead, System`Join[System`Values[Global`variableReplacements], System`Values[Global`allRules], System`List[System`Real, System`Integer]]]]], System`Set[Global`hasNested, System`False], Global`symbols, System`Set[Global`hasNumeric, System`False], System`Trace], System`CompoundExpression[System`SetDelayed[System`Trace[System`Pattern[Global`x, System`BlankNullSequence[]]], System`Message[System`MessageName[Global`CformSymbolic, "trace"], Global`x, System`Null, System`Null]], System`Trace["expr: ", Global`expr], System`Trace["variableReplacements: ", Global`variableReplacements], System`Trace["extraRules: ", Global`extraRules], System`Trace[Global`allRules], System`Trace["knownSymbols ", Global`knownSymbols], System`Trace[Global`result], System`Set[Global`result, System`ReplaceRepeated[Global`result, Global`allRules]], System`Trace[Global`result], System`Set[Global`symbols, System`Map[Global`SymbolicHead, System`Level[Global`result, System`List[-1], System`Rule[System`Heads, System`True]]]], System`Trace["ksm ", Global`symbols, System`ContainsAll[Global`knownSymbols, Global`symbols]], System`If[System`And[System`ContainsAll[Global`knownSymbols, Global`symbols], System`Not[System`Set[Global`hasNested, Global`NestedHeadsQ[Global`result]]], System`Not[System`Set[Global`hasNumeric, Global`NumericHeadsQ[Global`result]]]], Global`SymbolicCForm[System`Evaluate[Global`result]], System`CompoundExpression[System`Which[Global`hasNested, System`Message[System`MessageName[Global`Cform, "nestedhead"], Global`result], Global`hasNumeric, System`Message[System`MessageName[Global`Cform, "numerichead"], Global`result], System`True, System`Message[System`MessageName[Global`Cform, "unknownSym"], System`Map[Global`FullSymbolName, System`Complement[Global`symbols, Global`knownSymbols]], Global`result]], System`$Failed]]]]]], System`Off[System`MessageName[Global`CformSymbolic, "trace"]], System`Null]]