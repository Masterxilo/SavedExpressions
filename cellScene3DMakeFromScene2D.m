System`Cell[System`BoxData[System`RowBox[System`List["PRedefinePublicFunction", "[", "\[IndentingNewLine]", System`RowBox[System`List["(*", System`RowBox[System`List[System`RowBox[System`List["todo", " ", "the", " ", "lighting", " ", "model", " ", "might", " ", "be", " ", "different"]], ",", " ", System`RowBox[System`List[System`RowBox[System`List["so", " ", "this", " ", "does", " ", "not", " ", System`RowBox[System`List["generalize", ":", " ", System`RowBox[System`List["recompute", " ", "the", " ", System`RowBox[System`List["lighting", "?"]]]]]]]], "\[IndentingNewLine]", "\[Rule]", " ", System`RowBox[System`List[System`RowBox[System`List["need", "  ", "plain", " ", "unlit", " ", System`RowBox[System`List["color", "!"]]]], "\[IndentingNewLine]", "\[Rule]", " ", System`RowBox[System`List["diffuse", " ", "attribute", "\[IndentingNewLine]", "\[IndentingNewLine]", "TODO", " ", "while", " ", "using", " ", "the", " ", "simple", " ", "lighting", " ", "model"]]]]]], ",", " ", System`RowBox[System`List["shared", " ", "between", " ", "the", " ", "two"]], ",", " ", System`RowBox[System`List[System`RowBox[System`List["just", " ", "extend", " ", "l", " ", "of", " ", "2", "d", " ", "to", " ", "3", System`RowBox[System`List["d", " ", "--"]]]], ">", " ", System`RowBox[System`List["which", " ", "coordinate", " ", "becomes", " ", System`RowBox[System`List["0", "?"]]]]]]]], "\[IndentingNewLine]", "*)"]], "\[IndentingNewLine]", System`RowBox[System`List[System`RowBox[System`List[System`RowBox[System`List["Scene3DMakeFromScene2D", "[", System`RowBox[System`List["s_Scene2D", ",", System`RowBox[System`List["height_Integer:", "3"]]]], System`RowBox[System`List["(*", System`RowBox[System`List["amount", " ", "of", " ", "stacks", " ", "to", " ", "make"]], "*)"]], "]"]], "/;", System`RowBox[System`List["height", "\[GreaterEqual]", "3"]]]], "\[IndentingNewLine]", "\[IndentingNewLine]", ",", "\"stacks height copies of s on top of each other to obtain a 3d scene such that First@Scene3DSize@os===height\"", "\[IndentingNewLine]", "\[IndentingNewLine]", ",", System`RowBox[System`List["Module", "[", System`RowBox[System`List[System`RowBox[System`List["{", System`RowBox[System`List[System`RowBox[System`List["gd0", "=", System`RowBox[System`List["GDPrependDimension", "[", System`RowBox[System`List["s", "@", "\"GridData\""]], "]"]]]], ",", "gd", ",", System`RowBox[System`List["remainingHeight", "=", "height"]]]], "}"]], ",", "\[IndentingNewLine]", System`RowBox[System`List[System`RowBox[System`List["gd", "=", "gd0"]], ";", "\[IndentingNewLine]", System`RowBox[System`List["ForEach", "[", System`RowBox[System`List[System`RowBox[System`List["{", System`RowBox[System`List["h", ",", "2", ",", "height"]], "}"]], ",", "\[IndentingNewLine]", System`RowBox[System`List[System`RowBox[System`List["gd", "=", System`RowBox[System`List["gd", "~", "GDJoin", "~", System`RowBox[System`List["GDShift", "[", System`RowBox[System`List["gd0", ",", System`RowBox[System`List["{", System`RowBox[System`List[System`RowBox[System`List["h", "-", "1"]], ",", "0", ",", "0"]], "}"]]]], "]"]]]]]], ";"]]]], "\[IndentingNewLine]", "]"]], ";", System`RowBox[System`List["(*", System`RowBox[System`List[System`RowBox[System`List["todo", " ", "use", " ", "more", " ", "efficient", " ", "copying"]], ",", " ", System`RowBox[System`List["doubling", " ", "the", " ", "size", " ", "as", " ", "long", " ", "as", " ", "possible"]], ",", " ", System`RowBox[System`List["or", " ", "at", " ", "least", " ", "copy", " ", "only", " ", "one", " ", "layer", " ", "each", " ", "time"]]]], "*)"]], "\[IndentingNewLine]", System`RowBox[System`List["Scene3DMake", "[", "\[IndentingNewLine]", System`RowBox[System`List[System`RowBox[System`List["Scene3DEnergyLightIntensityExampleParameters", "[", "]"]], "\[IndentingNewLine]", System`RowBox[System`List["(*", System`RowBox[System`List[System`RowBox[System`List[System`RowBox[System`List["TODO", " ", System`RowBox[System`List["s", "@", "\"l\""]], " ", "should", " ", "have", " ", "some", " ", "relation", " ", "to", " ", "this"]], ".."]], " ", "or", " ", "estimate", " ", "lighting", " ", "right", " ", "away"]], "*)"]], ",", "gd"]], "]"]]]]]], "\[IndentingNewLine]", "]"]], "\[IndentingNewLine]", "\[IndentingNewLine]", ",", System`RowBox[System`List["os_Scene3D", "/;", System`RowBox[System`List[System`RowBox[System`List[System`RowBox[System`List["Length", "@", System`RowBox[System`List["os", "@", "\"l\""]]]], "\[Equal]", System`RowBox[System`List["Scene3DEnergyLightIntensityParameterCount", "[", "]"]]]], "&&", System`RowBox[System`List[System`RowBox[System`List["First", "@", System`RowBox[System`List["Scene3DSize", "@", "os"]]]], "\[GreaterEqual]", "3"]]]]]]]], System`RowBox[System`List["(*", System`RowBox[System`List["&&", System`RowBox[System`List[System`RowBox[System`List["First", "@", System`RowBox[System`List["Scene3DSize", "@", "os"]]]], "===", "height"]]]], "*)"]], "\[IndentingNewLine]", "]"]]], "Input", System`Rule[System`CellChangeTimes, System`List[System`List[3.6802525821796513`*^9, 3.680252603355056`*^9], System`List[3.6802526907050467`*^9, 3.6802527182394037`*^9], System`List[3.6802714735234413`*^9, 3.6802715353195477`*^9], System`List[3.6802814747350793`*^9, 3.6802815955638304`*^9], System`List[3.680281639965246`*^9, 3.6802817702818356`*^9], System`List[3.680281814288762`*^9, 3.680281840133995`*^9], System`List[3.680281997996972`*^9, 3.680282003240531`*^9], System`List[3.6803786610679846`*^9, 3.6803786741312685`*^9], System`List[3.6809821108621874`*^9, 3.680982117282086`*^9], System`List[3.680982724148113`*^9, 3.680982787544429`*^9], System`List[3.6811153160658755`*^9, 3.6811153257459574`*^9], System`List[3.6811176343081408`*^9, 3.681117707713642`*^9], System`List[3.6811177410356092`*^9, 3.681117773344307`*^9], 3.681739000955843`*^9, System`List[3.6817399708094225`*^9, 3.6817400140135765`*^9], System`List[3.681741110735715`*^9, 3.6817411207645493`*^9], 3.6857060041583138`*^9, System`List[3.6857060902892623`*^9, 3.685706119250559`*^9], System`List[3.685706443688966`*^9, 3.6857064524673414`*^9], System`List[3.6857066069493403`*^9, 3.68570667503934`*^9], System`List[3.6857067430004416`*^9, 3.6857067557175417`*^9], System`List[3.6857070174758444`*^9, 3.685707051928974`*^9], System`List[3.685707093954515`*^9, 3.685707104051944`*^9], System`List[3.685707134548582`*^9, 3.6857071495805764`*^9]]], System`Rule[System`CellTags, "depersistedCell6eb04c6c-fcf3-416c-95e3-5f383fcca276"], System`Rule[System`CellID, 176274724]]