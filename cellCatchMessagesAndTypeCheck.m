System`Cell[System`BoxData[System`RowBox[System`List[System`RowBox[System`List["Persist", "[", System`RowBox[System`List["CatchMessagesAndTypeCheck", ",", "\[IndentingNewLine]", "\[IndentingNewLine]", System`RowBox[System`List[System`RowBox[System`List["UnprotectClearAll", "@", "CatchMessagesAndTypeCheck"]], ";", "\[IndentingNewLine]", "\[IndentingNewLine]", System`RowBox[System`List[System`RowBox[System`List["UnexpectedResultType", "::", "msg"]], "=", "\"Expected result type `` got ``.\\n``\\n``\""]], ";", "\[IndentingNewLine]", System`RowBox[System`List[System`RowBox[System`List["UnexpectedMessages", "::", "msg"]], "=", "\"``\\n``\""]], ";", "\[IndentingNewLine]", "\[IndentingNewLine]", System`RowBox[System`List[System`RowBox[System`List["CatchMessagesAndTypeCheck", "::", "usage"]], "=", "\"CatchMessagesAndTypeCheck[body, resultPattern, error] run body, checking the return value for result pattern and throwing an error with additional message given by error when something is wrong\""]], ";", "\[IndentingNewLine]", "\[IndentingNewLine]", System`RowBox[System`List["CatchMessagesAndTypeCheck", "~", "SetAttributes", "~", "HoldAll"]], ";", "\[IndentingNewLine]", "\[IndentingNewLine]", System`RowBox[System`List[System`RowBox[System`List["CatchMessagesAndTypeCheck", "[", System`RowBox[System`List["body_", ",", "resultPattern_", ",", "error_"]], "]"]], ":=", System`RowBox[System`List["Check", "[", "\[IndentingNewLine]", System`RowBox[System`List[System`RowBox[System`List["With", "[", System`RowBox[System`List[System`RowBox[System`List["{", System`RowBox[System`List["result", "=", "body"]], "}"]], ",", "\[IndentingNewLine]", System`RowBox[System`List["If", "[", System`RowBox[System`List[System`RowBox[System`List["Not", "[", System`RowBox[System`List["result", "~", "MatchQ", "~", "resultPattern"]], "]"]], "\[IndentingNewLine]", ",", System`RowBox[System`List["MessageAbort", "[", System`RowBox[System`List[System`RowBox[System`List["UnexpectedResultType", "::", "msg"]], ",", "resultPattern", ",", System`RowBox[System`List["HoldForm", "@", "result"]], ",", "error"]], "]"]], ",", "result"]], "]"]]]], "]"]], "\[IndentingNewLine]", ",", System`RowBox[System`List["MessageAbort", "[", System`RowBox[System`List[System`RowBox[System`List["UnexpectedMessages", "::", "msg"]], ",", "error"]], "]"]]]], "]"]]]], ";", "\[IndentingNewLine]", "\[IndentingNewLine]", System`RowBox[System`List["MakeUndefinedFunctionProtect", "@", "CatchMessagesAndTypeCheck"]], ";"]]]], "\[IndentingNewLine]", "]"]], ";"]]], "Input", System`Rule[System`CellChangeTimes, System`List[System`List[3.6814863999984565`*^9, 3.6814865026746445`*^9], System`List[3.6814865625963755`*^9, 3.6814865990025415`*^9], 3.681631659200898`*^9, System`List[3.6816317717023425`*^9, 3.6816317757492695`*^9], System`List[3.681635820468131`*^9, 3.6816358353737535`*^9], System`List[3.681636764084152`*^9, 3.6816367770122876`*^9], 3.6816406434521756`*^9, System`List[3.683453086281414`*^9, 3.683453134359151`*^9]]], System`Rule[System`CellTags, "depersistedCell34dc715f-cf87-4a16-9f37-c279023f0824"]]