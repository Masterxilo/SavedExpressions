System`Cell[System`BoxData[System`RowBox[System`List["PRedefinePublicFunction", "[", "\[IndentingNewLine]", System`RowBox[System`List[System`RowBox[System`List["SOPCompiledPrepare", "[", System`RowBox[System`List["rif_RIFunction", ",", System`RowBox[System`List[System`RowBox[System`List["(", System`RowBox[System`List["forceRebuild_", "?", "BooleanQ"]], ")"]], "~", "Optional", "~", "False"]]]], "]"]], "\[IndentingNewLine]", "\[IndentingNewLine]", ",", "\"compiles and loads the sparse optimization Framework for the given function\"", ",", "\[IndentingNewLine]", "\[IndentingNewLine]", System`RowBox[System`List["Module", "[", System`RowBox[System`List[System`RowBox[System`List["{", System`RowBox[System`List["fn", ",", "fng", ",", "exe", ",", "link", ",", "lengthz", ",", "lengthfz", ",", "targetName", ",", "exportGeneratedText", ",", "targetFile"]], "}"]], ",", "\[IndentingNewLine]", "\[IndentingNewLine]", System`RowBox[System`List[System`RowBox[System`List[System`RowBox[System`List["fn", "@", "s_"]], ":=", System`RowBox[System`List[System`RowBox[System`List["SOPCompiled$FrameworkDirectory", "[", "]"]], "~", "FileNameJoin", "~", "s"]]]], ";", "\[IndentingNewLine]", System`RowBox[System`List[System`RowBox[System`List["fng", "@", "s_"]], ":=", System`RowBox[System`List["FileNameJoin", "@", System`RowBox[System`List["{", System`RowBox[System`List[System`RowBox[System`List["SOPCompiled$FrameworkDirectory", "[", "]"]], ",", "\"generated\"", ",", "s"]], "}"]]]]]], ";", "\[IndentingNewLine]", System`RowBox[System`List[System`RowBox[System`List["exportGeneratedText", "[", System`RowBox[System`List["fn_String", ",", "t_"]], "]"]], ":=", "\[IndentingNewLine]", System`RowBox[System`List["Export", "[", System`RowBox[System`List[System`RowBox[System`List["fng", "@", "fn"]], ",", "t", ",", "\"Text\""]], "]"]]]], ";", "\[IndentingNewLine]", "\[IndentingNewLine]", System`RowBox[System`List["(*", "exportDefinitions", "*)"]], "\[IndentingNewLine]", System`RowBox[System`List["Print", "[", System`RowBox[System`List["\"rif: \"", ",", System`RowBox[System`List["RIFunctionOutputExpressionMap", "[", "rif", "]"]]]], "]"]], ";", "\[IndentingNewLine]", "\[IndentingNewLine]", System`RowBox[System`List["exportGeneratedText", "[", System`RowBox[System`List["\"$CFormDefines.cpp\"", ",", System`RowBox[System`List["CFormDefinesCUDAFloat", "[", "]"]]]], "]"]], ";", "\[IndentingNewLine]", System`RowBox[System`List["exportGeneratedText", "[", System`RowBox[System`List["\"lengthz.cpp\"", ",", System`RowBox[System`List["lengthz", "=", System`RowBox[System`List["RIFunctionArgumentsLength", "@", "rif"]]]]]], "]"]], ";", "\[IndentingNewLine]", System`RowBox[System`List["exportGeneratedText", "[", System`RowBox[System`List["\"lengthfz.cpp\"", ",", System`RowBox[System`List["lengthfz", "=", System`RowBox[System`List["RIFunctionOutputsLength", "@", "rif"]]]]]], "]"]], ";", "\[IndentingNewLine]", "\[IndentingNewLine]", System`RowBox[System`List["Off", "[", System`StyleBox[System`RowBox[System`List["StringTrim", "::", "strse"]], "MessageName"], System`StyleBox["]", "MessageName"]]], System`StyleBox[";", "MessageName"], System`StyleBox[System`RowBox[System`List["(*", System`RowBox[System`List[System`RowBox[System`List[System`RowBox[System`List[System`RowBox[System`List["StringTrim", "::", "strse"]], " ", "CSwitch"]], " ", "&"]], " ", "ToCCodeString", " ", "bug", " ", "shut", " ", "up"]], "*)"]], "MessageName"], "\[IndentingNewLine]", System`RowBox[System`List["exportGeneratedText", "[", System`RowBox[System`List["\"f.cpp\"", ",", System`RowBox[System`List[System`RowBox[System`List["rif", "//", "RIFunctionCFormOutputArrayAssignments"]], "//", "ToCCodeString"]]]], "]"]], ";", "\[IndentingNewLine]", System`RowBox[System`List["exportGeneratedText", "[", System`RowBox[System`List["\"df.cpp\"", ",", System`RowBox[System`List[System`RowBox[System`List["rif", "//", "RIFunctionCFormAllDerivativesIndexed"]], "//", "ToCCodeString"]]]], "]"]], ";", "\[IndentingNewLine]", "\[IndentingNewLine]", System`RowBox[System`List["(*", System`RowBox[System`List["compile", " ", "if", " ", "necessary"]], "*)"]], "\[IndentingNewLine]", "\[IndentingNewLine]", System`RowBox[System`List["targetName", "=", System`RowBox[System`List["\"Framework\"", "<>", System`RowBox[System`List["ToString", "@", System`RowBox[System`List["Hash", "[", "\[IndentingNewLine]", System`RowBox[System`List[System`RowBox[System`List["{", System`RowBox[System`List[System`RowBox[System`List["rif", "//", "RIFunctionArguments"]], ",", System`RowBox[System`List["rif", "//", "RIFunctionExpressionList"]]]], "}"]], System`RowBox[System`List["(*", System`RowBox[System`List[System`RowBox[System`List["order", " ", "of", " ", "arguments", " ", "and", " ", "computation", " ", "matter", " ", "for", " ", "energy", " ", "function", " ", "identity"]], " ", "-", " ", System`RowBox[System`List["any", " ", "information", " ", "rif", " ", "might", " ", "caches", " ", "does", " ", "not"]]]], "*)"]], "\[IndentingNewLine]", ",", "\"CRC32\""]], "]"]]]]]]]], ";", "\[IndentingNewLine]", "\[IndentingNewLine]", "\[IndentingNewLine]", System`RowBox[System`List["targetFile", "=", System`RowBox[System`List["fn", "[", System`RowBox[System`List["\"x64\\\\Debug\\\\\"", "<>", "targetName", "<>", "\".exe\""]], "]"]]]], ";", "\[IndentingNewLine]", System`RowBox[System`List["If", "[", System`RowBox[System`List[System`RowBox[System`List[System`RowBox[System`List["Not", "@", System`RowBox[System`List["FileExistsQ", "@", "targetFile"]]]], "||", "forceRebuild"]], ",", "\[IndentingNewLine]", "\[IndentingNewLine]", System`RowBox[System`List[System`RowBox[System`List["TaskKill", "[", System`RowBox[System`List["targetName", "<>", "\".exe\""]], "]"]], ";", "\[IndentingNewLine]", System`RowBox[System`List["Print", "@", System`RowBox[System`List["MSBuild", "[", System`RowBox[System`List[System`RowBox[System`List["fn", "@", "\"Framework.sln\""]], ",", System`RowBox[System`List["{", System`RowBox[System`List["\"/t:Rebuild\"", System`RowBox[System`List["(*", System`RowBox[System`List["must", " ", "rebuild", " ", "because", " ", "changes", " ", "to", " ", "z", " ", "and", " ", "fz", " ", "are", " ", "not", " ", "recognized", " ", "cuz", " ", "they", " ", "are", " ", "#included"]], "*)"]], ",", System`RowBox[System`List["\"/p:TargetName=\"", "<>", "targetName"]]]], "}"]]]], "]"]]]]]]]], "\[IndentingNewLine]", "\[IndentingNewLine]", "]"]], ";", "\[IndentingNewLine]", "\[IndentingNewLine]", System`RowBox[System`List[System`RowBox[System`List["{", System`RowBox[System`List["a", "=", System`RowBox[System`List["Association", "[", "\[IndentingNewLine]", System`RowBox[System`List[System`RowBox[System`List["\"rif\"", "\[Rule]", "rif"]], ",", "\[IndentingNewLine]", System`RowBox[System`List["\"lengthz\"", "\[Rule]", "lengthz"]], ",", "\[IndentingNewLine]", System`RowBox[System`List["\"lengthfz\"", "\[Rule]", "lengthfz"]], ",", "\[IndentingNewLine]", System`RowBox[System`List["\"targetName\"", "\[Rule]", "targetFile"]]]], "\[IndentingNewLine]", "]"]]]], "}"]], "~", "With", "~", System`RowBox[System`List["SOPCompiled", "[", "a", "]"]]]]]]]], "\[IndentingNewLine]", "]"]], "\[IndentingNewLine]", "\[IndentingNewLine]", ",", System`RowBox[System`List[System`RowBox[System`List["SOPCompiled", "[", "a_Association", "]"]], "/;", System`RowBox[System`List["FileExistsQ", "@", System`RowBox[System`List["a", "@", "\"targetName\""]]]]]], "\[IndentingNewLine]", "\[IndentingNewLine]", ",", "\"Hint: Probably compilation of Framework.sln failed. Try manually compiling it. If the log (Messages window) says 'Internal error' (nvcc error : 'ptxas' died with status 0xC0000005 (ACCESS_VIOLATION) ), just try running it again.\""]], "\[IndentingNewLine]", "]"]]], "Input", System`Rule[System`CellChangeTimes, System`List[System`List[3.681029702527623`*^9, 3.6810299120821843`*^9], System`List[3.681029943170094`*^9, 3.6810299607525735`*^9], System`List[3.6810300725597916`*^9, 3.681030075842641`*^9], System`List[3.681030109191246`*^9, 3.6810302903620358`*^9], System`List[3.6810303738318977`*^9, 3.681030375426297`*^9], System`List[3.6810306070557375`*^9, 3.681030620184524`*^9], System`List[3.68103241639707`*^9, 3.681032472922723`*^9], System`List[3.6810325594185076`*^9, 3.681032661633537`*^9], System`List[3.681032696327526`*^9, 3.681032718652643`*^9], System`List[3.681032848415737`*^9, 3.6810328643965607`*^9], System`List[3.681032933757521`*^9, 3.681032945759128`*^9], System`List[3.6810330337285757`*^9, 3.6810330355880523`*^9], System`List[3.681033101494794`*^9, 3.681033151570773`*^9], System`List[3.681035808933938`*^9, 3.681035875481765`*^9], System`List[3.6810360875093155`*^9, 3.6810362589065995`*^9], 3.6810367379909`*^9, System`List[3.6810367740946846`*^9, 3.681036822795143`*^9], System`List[3.6810473234975214`*^9, 3.6810473527222877`*^9], System`List[3.681047478522208`*^9, 3.681047479224801`*^9], System`List[3.6810580054550514`*^9, 3.681058043087534`*^9], System`List[3.681058960397457`*^9, 3.681059010967534`*^9], System`List[3.681061253075346`*^9, 3.681061264746176`*^9], System`List[3.681061312425886`*^9, 3.6810613304362926`*^9], System`List[3.681061708412974`*^9, 3.6810617215002594`*^9], System`List[3.681084994047612`*^9, 3.6810850031820087`*^9], System`List[3.6811502339602346`*^9, 3.6811502929197288`*^9], System`List[3.6811619424392815`*^9, 3.681161953344472`*^9], System`List[3.6811983392221203`*^9, 3.681198351457021`*^9], 3.6811983978366394`*^9, 3.6817215563036094`*^9, System`List[3.6817217872535143`*^9, 3.6817218370087805`*^9], 3.6817225522269807`*^9, System`List[3.6817226710362177`*^9, 3.6817227514187365`*^9]]], System`Rule[System`CellTags, "depersistedCell3e4fb214-ff95-48de-af6e-9299f7b348bd"]]