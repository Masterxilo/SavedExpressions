System`HoldComplete[Global`RedefinePublicFunction[Global`SceneXEnergyf[System`Pattern[Global`colorDim, System`Blank[System`Integer]], System`Pattern[Global`lightIntensityParametrized, System`Blank[]], System`Pattern[Global`lightIntensityParameterCount, System`Blank[System`Integer]], System`Pattern[Global`dimension, System`Alternatives[2, 3]]], "2 or 3 dimensional vsfs energy\n\nc,a,d,doriginal are indexed as *[{x, y (,z)}], -1 \[LessEqual] x,y(,z) \[LessEqual] 1, x,y,z \[Element] Z*)\n\nc is additionally indexed from 1 to colorDim, as in c[{x,y}, 1] etc.\n\nl is lightIntensityParameterCount-dimensional and parametrizes the lighting model,\ndefined by lightIntensityParametrized[l,n]", System`Module[System`List[Global`forwardDifference, Global`backwardDifference, Global`secondDifference, Global`gradient, Global`forwardGradient, Global`backwardGradient, Global`laplacian, Global`phi, Global`trob, Global`gamma, Global`i, System`Set[Global`id, System`IdentityMatrix[Global`dimension]], Global`lightIntensity, Global`normal, Global`n, Global`b, Global`v, Global`u, Global`cv, Global`normalize, Global`norm, Global`PiecewiseVector], System`CompoundExpression[System`CompoundExpression[System`SetDelayed[Global`forwardDifference[System`Pattern[Global`f, System`Blank[]]], System`Function[System`Plus[Global`f[System`Plus[System`Slot[1], 1]], System`Times[-1, Global`f[System`Slot[1]]]]]], System`SetDelayed[Global`backwardDifference[System`Pattern[Global`f, System`Blank[]]], System`Function[System`Plus[Global`f[System`Slot[1]], System`Times[-1, Global`f[System`Plus[System`Slot[1], -1]]]]]], System`SetDelayed[Global`secondDifference[System`Pattern[Global`f, System`Blank[]]], Global`forwardDifference[Global`backwardDifference[Global`f]]], System`SetDelayed[Global`gradient[System`Pattern[Global`f, System`Blank[]], System`Optional[System`Pattern[Global`differenceFunction, System`Blank[]], Global`forwardDifference]], System`Function[System`List[Global`p], System`Table[System`With[System`List[System`Set[Global`w, Global`v]], Global`differenceFunction[System`Function[Global`f[System`Plus[Global`p, Global`w]]]][0]], System`List[Global`v, System`Times[System`Slot[1], Global`id]]]]], System`SetDelayed[Global`forwardGradient[System`Pattern[Global`f, System`Blank[]]], Global`gradient[Global`f, Global`forwardDifference]], System`SetDelayed[Global`backwardGradient[System`Pattern[Global`f, System`Blank[]]], Global`gradient[Global`f, Global`backwardDifference]], System`SetDelayed[Global`laplacian[System`Pattern[Global`f, System`Blank[]]], System`Function[System`Total[Global`gradient[Global`f, Global`secondDifference][System`Slot[1]]]]], System`SetDelayed[Global`norm[System`Pattern[Global`x, System`Blank[]]], System`Sqrt[Global`Norm2[Global`x]]], System`Null], System`SetDelayed[Global`normalize[System`Pattern[Global`x, System`Blank[]]], System`Times[Global`x, System`Power[Global`norm[Global`x], -1]]], System`Null, System`SetDelayed[Global`cv[System`Pattern[Global`p, System`Blank[]]], System`Array[System`Function[Global`c[Global`p, System`Slot[1]]], Global`colorDim]], System`SetDelayed[Global`i[System`Pattern[Global`p, System`Blank[]]], System`Mean[Global`cv[Global`p]]], System`SetDelayed[Global`gamma[System`Pattern[Global`p, System`Blank[]]], System`Times[Global`cv[Global`p], System`Power[System`Plus[Global`i[Global`p], 1], -1]]], System`Set[Global`trob, 3], System`SetDelayed[Global`phi[System`Pattern[Global`x, System`Blank[]]], System`Times[1, System`Power[System`Power[System`Plus[1, System`Times[Global`trob, Global`x]], 3], -1]]], System`SetDelayed[Global`normal[System`Pattern[Global`f, System`Blank[]]], System`Function[Global`normalize[Global`forwardGradient[Global`f][System`Slot[1]]]]], System`SetDelayed[Global`n[System`Pattern[Global`v, System`Blank[]]], Global`normal[Global`d][Global`v]], System`SetDelayed[Global`lightIntensity[System`Pattern[Global`n, System`Blank[]]], Global`lightIntensityParametrized[System`Array[Global`l, Global`lightIntensityParameterCount], Global`n]], System`SetDelayed[Global`b[System`Pattern[Global`v, System`Blank[]]], System`Times[Global`a[Global`v], Global`lightIntensity[Global`n[Global`v]]]], System`SetDelayed[System`Condition[Global`PiecewiseVector[System`List[System`List[System`Pattern[Global`v, System`Blank[System`List]], System`Pattern[Global`cond, System`Blank[]]]], System`Pattern[Global`def, System`Blank[System`List]]], System`Equal[System`Length[Global`v], System`Length[Global`def]]], System`Table[System`Piecewise[System`List[System`List[System`Part[Global`v, Global`i], Global`cond]], System`Part[Global`def, Global`i]], System`List[Global`i, System`Length[Global`v]]]], System`Set[Global`v, System`Table[0, Global`dimension]], System`ReplaceAll[System`Join[Global`PiecewiseVector[System`List[System`List[System`Times[Global`eg, System`Plus[Global`backwardGradient[Global`b][Global`v], System`Times[-1, Global`backwardGradient[Global`i][Global`v]]]], System`Apply[System`And, System`Table[System`Greater[Global`norm[Global`forwardGradient[Global`d][System`Plus[Global`v, Global`delta]]], System`Power[10, -6]], System`List[Global`delta, System`Tuples[System`List[-1, 0], 3]]]]]], System`Table[0.`, Global`dimension]], System`Times[Global`er, System`List[Global`laplacian[Global`d][Global`v]]], System`Times[Global`es, System`List[System`Plus[Global`d[Global`v], System`Times[-1, Global`doriginal[Global`v]]]]], System`Times[Global`ea, System`Table[System`Times[System`Sqrt[Global`phi[Global`norm[System`Plus[Global`gamma[Global`v], System`Times[-1, Global`gamma[Global`u]]]]]], System`Plus[Global`a[Global`v], System`Times[-1, Global`a[Global`u]]]], System`List[Global`u, System`Map[System`Function[System`Plus[Global`v, System`Slot[1]]], System`Join[Global`id, System`Times[-1, Global`id]]]]]]], System`Thread[System`Rule[System`List[Global`a, Global`d, Global`doriginal, Global`eg, Global`er, Global`es, Global`ea, Global`c, Global`l], System`Map[System`Symbol, System`List["a", "d", "doriginal", "eg", "er", "es", "ea", "c", "l"]]]]]]], System`List[System`BlankSequence[]], ""]]