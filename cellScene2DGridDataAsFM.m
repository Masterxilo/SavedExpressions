System`Cell[System`BoxData[System`RowBox[System`List["PRedefinePublicFunction", "[", "\[IndentingNewLine]", "\[IndentingNewLine]", System`RowBox[System`List[System`RowBox[System`List[System`RowBox[System`List["Scene2DGridDataAsFM", "[", "s_Scene2D", "]"]], "/;", System`RowBox[System`List[System`RowBox[System`List["!", System`RowBox[System`List["Scene2DSparseQ", "@", "s"]]]], "&&", System`RowBox[System`List[System`RowBox[System`List["Scene2DEnergyColorDim", "@", "s"]], "\[LessEqual]", "3"]]]]]], System`RowBox[System`List["(*", System`RowBox[System`List["see", " ", "implementation"]], "*)"]], "\[IndentingNewLine]", "\[IndentingNewLine]", ",", "\"Gives a FiniteMapping that maps sequences {x,y,part}, i.e. {Sequence@@p, part} to a real number for all valid positions {x,y} = p of the scene and part one of {1,2,3,3+c}, for c from 1 to Scene2DEnergyColorDim@s.\n\nPrepares the inverse function of the domain\"", ",", "\[IndentingNewLine]", "\[IndentingNewLine]", System`RowBox[System`List["FiniteMappingMakeFromFunctions", "[", "\[IndentingNewLine]", System`RowBox[System`List[System`RowBox[System`List["With", "[", System`RowBox[System`List[System`RowBox[System`List["{", System`RowBox[System`List["gdf", "=", System`RowBox[System`List["FMEvaluate", "[", System`RowBox[System`List[System`RowBox[System`List["s", "[", "\"GridData\"", "]"]], "//", "GDAsFM"]], "]"]]]], "}"]], ",", "\[IndentingNewLine]", "\[IndentingNewLine]", System`RowBox[System`List["Function", "[", "\[IndentingNewLine]", System`RowBox[System`List[System`RowBox[System`List["{", "posData", "}"]], ",", "\[IndentingNewLine]", System`RowBox[System`List["Extract", "[", "\[IndentingNewLine]", System`RowBox[System`List[System`RowBox[System`List["gdf", "@", System`RowBox[System`List["Most", "@", "posData"]]]], ",", "\[IndentingNewLine]", System`RowBox[System`List[System`RowBox[System`List["{", System`RowBox[System`List[System`RowBox[System`List["{", "1", "}"]], ",", System`RowBox[System`List["{", "2", "}"]], ",", System`RowBox[System`List["{", "3", "}"]], ",", System`RowBox[System`List["{", System`RowBox[System`List["4", ",", "1"]], "}"]], ",", System`RowBox[System`List["{", System`RowBox[System`List["4", ",", "2"]], "}"]], ",", System`RowBox[System`List["{", System`RowBox[System`List["4", ",", "3"]], "}"]]]], "}"]], "[", System`RowBox[System`List["[", System`RowBox[System`List["Last", "@", "posData"]], "]"]], "]"]]]], "\[IndentingNewLine]", "]"]]]], "\[IndentingNewLine]", "]"]]]], "\[IndentingNewLine]", "\[IndentingNewLine]", "]"]], "\[IndentingNewLine]", System`RowBox[System`List["(*", System`RowBox[System`List["domain", ":"]], "*)"]], ",", System`RowBox[System`List["(*", System`RowBox[System`List["gives", " ", System`RowBox[System`List["{", System`RowBox[System`List["p__", ",", " ", System`RowBox[System`List[System`RowBox[System`List["1", " ", "to", " ", "3"]], " ", "+", " ", "colorDim"]]]]]]]], "*)"]], "\[IndentingNewLine]", System`RowBox[System`List["FiniteMappingMakeCoordinateBoundsArray", "[", System`RowBox[System`List[System`RowBox[System`List[System`RowBox[System`List["Scene2DCoordinateBounds", "@", "s"]], "~", "Append", "~", System`RowBox[System`List["(", System`RowBox[System`List["{", System`RowBox[System`List["1", ",", System`RowBox[System`List["3", "+", System`RowBox[System`List["Scene2DEnergyColorDim", "@", "s"]]]]]], "}"]], ")"]]]], ",", System`RowBox[System`List["Method", "\[Rule]", "InverseFunction"]]]], "]"]]]], "\[IndentingNewLine]", "]"]], "\[IndentingNewLine]", "\[IndentingNewLine]", ",", "_FiniteMapping"]], "\[IndentingNewLine]", "]"]]], "Input", System`Rule[System`CellChangeTimes, System`List[System`List[3.6832978902331`*^9, 3.6832979407911434`*^9], System`List[3.6832980299959483`*^9, 3.6832981432162275`*^9], System`List[3.6832987460743847`*^9, 3.6832988922514925`*^9], System`List[3.683298944344737`*^9, 3.6832991914040723`*^9], 3.683449638311529`*^9, System`List[3.6834496753802586`*^9, 3.683449752981668`*^9], 3.683478135547363`*^9, System`List[3.683478367797202`*^9, 3.683478390921981`*^9], System`List[3.6834784544866714`*^9, 3.683478485245183`*^9], System`List[3.6834785460413656`*^9, 3.6834785762094774`*^9], 3.6834796697666836`*^9, 3.6834797357883615`*^9, System`List[3.6834798340318584`*^9, 3.683479836438219`*^9], System`List[3.6834798907347136`*^9, 3.6834798917816706`*^9], System`List[3.683480023009475`*^9, 3.683480031700102`*^9]]], System`Rule[System`CellTags, "depersistedCelld7a30795-eb4a-4b98-a927-6953a665c672"]]