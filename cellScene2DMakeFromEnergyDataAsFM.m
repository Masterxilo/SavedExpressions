System`Cell[System`BoxData[System`RowBox[System`List["PRedefinePublicFunction", "[", "\[IndentingNewLine]", System`RowBox[System`List[System`RowBox[System`List["Scene2DMakeFromEnergyDataAsFM", "[", "f_FiniteMapping", "]"]], "\[IndentingNewLine]", "\[IndentingNewLine]", ",", "\"Undo the {p, (1|2|3|3+c)} linearization\"", "\[IndentingNewLine]", "\[IndentingNewLine]", ",", "\[IndentingNewLine]", System`RowBox[System`List["With", "[", "\[IndentingNewLine]", System`RowBox[System`List[System`RowBox[System`List["{", System`RowBox[System`List["coordinates", "=", System`RowBox[System`List["Cases", "[", System`RowBox[System`List[System`RowBox[System`List["FMDomain", "@", "f"]], ",", "_List"]], "]"]]]], "}"]], ",", "\[IndentingNewLine]", System`RowBox[System`List["{", "\[IndentingNewLine]", System`RowBox[System`List[System`RowBox[System`List["colorDim", "=", System`RowBox[System`List[System`RowBox[System`List["Last", "@", System`RowBox[System`List["CoordinateBoundsMax", "@", "coordinates"]]]], "-", "3"]]]], ",", System`RowBox[System`List["(*", System`RowBox[System`List["assumes", " ", "first", " ", "element", " ", "is", " ", "one", " ", "of", " ", "the", " ", "data", " ", "elements"]], "*)"]], "\[IndentingNewLine]", System`RowBox[System`List["data", "=", System`RowBox[System`List["f", "//", "FMAsRules"]]]], ",", "\[IndentingNewLine]", System`RowBox[System`List["p", "=", System`RowBox[System`List["Most", "/@", "coordinates"]]]], ",", "\[IndentingNewLine]", System`RowBox[System`List["fc", "=", System`RowBox[System`List["FMEvaluate", "[", System`RowBox[System`List["f", ",", System`RowBox[System`List["Method", "\[Rule]", "Compile"]]]], "]"]]]]]], "\[IndentingNewLine]", "}"]], ",", "\[IndentingNewLine]", System`RowBox[System`List["{", System`RowBox[System`List["bounds", "=", System`RowBox[System`List["CoordinateBounds", "@", "p"]]]], "}"]], "\[IndentingNewLine]", ",", "\[IndentingNewLine]", System`RowBox[System`List[System`RowBox[System`List["Assert", "[", System`RowBox[System`List[System`RowBox[System`List["colorDim", ">", "0"]], "&&", System`RowBox[System`List["colorDim", "\[LessEqual]", "3"]]]], "]"]], ";", "\[IndentingNewLine]", System`RowBox[System`List["Assert", "[", System`RowBox[System`List[System`RowBox[System`List["Length", "@", "bounds"]], "===", "2"]], "]"]], ";", "\[IndentingNewLine]", System`RowBox[System`List["Assert", "@", System`RowBox[System`List["CoordinateBoundsQ", "@", "bounds"]]]], ";", "\[IndentingNewLine]", System`RowBox[System`List["(*", System`RowBox[System`List[System`RowBox[System`List["TODO", " ", "assumes", " ", "a", " ", "non"]], "-", System`RowBox[System`List["sparse", " ", "scene"]]]], "*)"]], "\[IndentingNewLine]", System`RowBox[System`List["With", "[", "\[IndentingNewLine]", System`RowBox[System`List[System`RowBox[System`List["{", "\[IndentingNewLine]", System`RowBox[System`List["rules", "=", System`RowBox[System`List["(", System`RowBox[System`List["Table", "[", System`RowBox[System`List["(*", System`RowBox[System`List["{", System`RowBox[System`List["\"a\"", ",", "\"d\"", ",", "\"doriginal\"", ",", "\"c\""]], "}"]], "*)"]], "\[IndentingNewLine]", System`RowBox[System`List[System`RowBox[System`List["q", "\[Rule]", System`RowBox[System`List["{", System`RowBox[System`List[System`RowBox[System`List["fc", "@", System`RowBox[System`List["{", System`RowBox[System`List[System`RowBox[System`List["Sequence", "@@", "q"]], ",", "1"]], "}"]]]], ",", System`RowBox[System`List["fc", "@", System`RowBox[System`List["{", System`RowBox[System`List[System`RowBox[System`List["Sequence", "@@", "q"]], ",", "2"]], "}"]]]], ",", System`RowBox[System`List["fc", "@", System`RowBox[System`List["{", System`RowBox[System`List[System`RowBox[System`List["Sequence", "@@", "q"]], ",", "3"]], "}"]]]], ",", System`RowBox[System`List["Table", "[", System`RowBox[System`List[System`RowBox[System`List["fc", "@", System`RowBox[System`List["{", System`RowBox[System`List[System`RowBox[System`List["Sequence", "@@", "q"]], ",", System`RowBox[System`List["3", "+", "i"]]]], "}"]]]], ",", System`RowBox[System`List["{", System`RowBox[System`List["i", ",", "colorDim"]], "}"]]]], "]"]]]], "}"]]]], "\[IndentingNewLine]", ",", System`RowBox[System`List["{", System`RowBox[System`List["q", ",", "p"]], "}"]]]], "]"]], ")"]]]], "\[IndentingNewLine]", "}"]], ",", "\[IndentingNewLine]", "\[IndentingNewLine]", System`RowBox[System`List["Scene2DMakeFromRules", "[", System`RowBox[System`List[System`RowBox[System`List["fc", "/@", System`RowBox[System`List["Scene2DEnergyLightParameters", "[", "]"]]]], ",", "rules"]], "]"]]]], "\[IndentingNewLine]", "\[IndentingNewLine]", System`RowBox[System`List["(*", "TODO", "*)"]], "\[IndentingNewLine]", "]"]]]]]], "\[IndentingNewLine]", "]"]], "\[IndentingNewLine]", ",", "_Scene2D"]], "\[IndentingNewLine]", "]"]]], "Input", System`Rule[System`CellChangeTimes, System`List[System`List[3.6834691785074377`*^9, 3.6834692672619333`*^9], System`List[3.6834693390412016`*^9, 3.6834693409255204`*^9], 3.6834708919483185`*^9, System`List[3.683471056178385`*^9, 3.683471193715108`*^9], System`List[3.683471270801445`*^9, 3.683471441886688`*^9], System`List[3.6834715033525224`*^9, 3.683471611607086`*^9], System`List[3.6834716629319096`*^9, 3.683471692562126`*^9], System`List[3.683471777944607`*^9, 3.6834718850828466`*^9], System`List[3.683472103123927`*^9, 3.6834721593668947`*^9], System`List[3.68347220682283`*^9, 3.683472228539637`*^9], System`List[3.6834722716290107`*^9, 3.683472272458747`*^9]]], System`Rule[System`CellTags, "depersistedCelld7a30795-eb4a-4b98-a927-6953a665c672"]]