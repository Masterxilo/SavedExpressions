System`HoldComplete[Global`RedefinePublicFunction[Global`Scene2DCreateVsfs2DSceneFromImage[System`PatternTest[System`Pattern[Global`img, System`Blank[System`Image]], Global`HasAlphaChannel], System`Pattern[Global`lightIntensityParametrized, System`Blank[]], System`PatternTest[System`Pattern[Global`lv, System`Blank[]], Global`NumericVectorQ], System`Optional[System`Pattern[Global`measurementBlur, System`Blank[System`Integer]], 8]], "Creates the data for a Scene2D from an image with transparency", System`Module[System`List[Global`id, Global`alpha, Global`distanceField, Global`measuredDistanceField, Global`imgoutline, Global`outline, Global`xnor, Global`ynor, Global`normals, Global`inormals, Global`litImage, Global`litOutline, Global`litColors, Global`diffuse, System`Set[Global`colorDims, System`Plus[System`ImageChannels[Global`img], -1]], Global`DPrint], System`CompoundExpression[System`SetAttributes[Global`DPrint, System`HoldAll], System`SetDelayed[Global`DPrint[System`BlankNullSequence[]], System`Null], Global`DPrint[Global`colorDims], Global`DPrint[Global`img], System`Set[Global`id, System`ImageData[Global`img]], System`Set[Global`alpha, System`AlphaChannel[Global`img]], Global`DPrint[Global`alpha], System`Set[Global`distanceField, System`ImageData[Global`DistanceTransformFull[Global`alpha]]], System`Null, Global`DPrint[System`MatrixPlot[Global`distanceField]], System`Set[Global`measuredDistanceField, System`ImageData[System`Blur[System`Image[Global`distanceField], Global`measurementBlur]]], Global`DPrint[System`MatrixPlot[Global`measuredDistanceField]], Global`DPrint[System`Show[System`Apply[System`Function[System`ListContourPlot[System`Slot[1], System`Rule[System`Contours, System`List[0]], System`Rule[System`ContourShading, System`None], System`Rule[System`ContourStyle, System`Slot[2]]]], System`List[System`List[Global`measuredDistanceField, System`List[System`Thick, System`Red]], System`List[Global`distanceField, System`Blue]], System`List[1]]]], System`Set[Global`outline, Global`InternalOutline[Global`alpha]], Global`DPrint[System`ImageMultiply[Global`outline, Global`alpha]], Global`DPrint[System`EdgeDetect[Global`alpha]], System`Set[Global`imgoutline, System`SetAlphaChannel[Global`img, Global`outline]], Global`DPrint[Global`imgoutline], System`Set[Global`diffuse, Global`NearestFilter[Global`imgoutline]], Global`DPrint[Global`diffuse], System`Set[System`List[Global`xnor, Global`ynor], System`Map[System`Function[System`ImageData[System`ImageConvolve[System`Image[Global`distanceField], System`Slot[1][System`List[System`List[1, 0, -1]]]]]], System`List[System`Identity, System`Transpose]]], Global`DPrint[System`Map[System`MatrixPlot, System`List[Global`xnor, Global`ynor]]], System`Set[Global`normals, System`Map[System`Normalize, Global`MatrixInterleave[System`List[Global`xnor, Global`ynor]], System`List[2]]], Global`DPrint[Global`ListNormalVectorPlot[Global`normals]], System`Set[Global`litImage, System`Image[System`Map[System`Function[Global`lightIntensityParametrized[Global`lv, System`Slot[1]]], Global`normals, System`List[2]]]], Global`DPrint[Global`litImage], System`Set[Global`litOutline, System`ImageMultiply[Global`litImage, Global`imgoutline]], Global`DPrint[Global`litOutline], System`Set[Global`litColors, Global`NearestFilter[Global`litOutline]], Global`DPrint[Global`litColors], System`List[System`Rule["colorDim", Global`colorDims], System`Rule["l", Global`lv], System`Rule["c", System`ArrayReshape[System`ImageData[System`RemoveAlphaChannel[Global`litColors]], System`Append[System`Part[System`Dimensions[System`ImageData[System`RemoveAlphaChannel[Global`litColors]]], System`Span[1, 2]], Global`colorDims]]], System`Rule["normalSharp", Global`normals], System`Rule["d", Global`measuredDistanceField], System`Rule["doriginal", Global`measuredDistanceField], System`Rule["dsharp", Global`distanceField], System`Rule["a", System`ConstantArray[1.`, System`Dimensions[Global`distanceField]]], System`Rule["diffuse", System`ImageData[System`RemoveAlphaChannel[Global`diffuse]]]]]], System`Blank[], ""]]